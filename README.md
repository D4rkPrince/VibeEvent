## VibeEvent
Сервис записи и контроля документов: сроки, статусы, напоминания.

### Возможности
- Добавление документа с датой окончания и типом
- Список документов, истекающих в ближайшие 30/60 дней
- Обновление документа с новой датой окончания и историей изменений
- Механизм напоминаний (email/webhook) на тестовый адрес

### Быстрый старт
1) Установить зависимости:
```
pip install -r requirements.txt
```

2) Запустить API:
```
python -m app.main
```

API будет доступно на `http://127.0.0.1:8000`.
UI доступен на `http://127.0.0.1:8000/`.

### Краткое руководство
1) Добавьте документ через кнопку `+ Добавить документ`.
2) Используйте поиск и фильтры карточек по срокам.
3) Нажмите `Продлить`, чтобы обновить срок действия.
4) Нажмите `История`, чтобы увидеть историю обновлений.
5) Кнопка `Удалить` удаляет один документ, `Очистить все` — все документы.

### Примеры запросов
Добавить документ:
```
POST /documents
{
  "title": "Паспорт",
  "doc_type": "passport",
  "expiry_date": "2026-12-31"
}
```

Список документов:
```
GET /documents
```

Документы с истечением в 30/60 дней:
```
GET /documents/expiring?days=30
GET /documents/expiring?days=60
```

Обновить документ с новой датой:
```
POST /documents/{id}/renew
{
  "new_expiry_date": "2028-12-31"
}
```

История обновлений:
```
GET /documents/{id}/history
```

Отправка напоминаний (тестовый email/webhook):
```
POST /reminders/send?days=30&mode=email
POST /reminders/send?days=60&mode=webhook
```

Напоминания пишутся в `data/outbox.log`.

### Настройка тестовых адресов
- `REMINDER_TEST_EMAIL` — тестовый email (по умолчанию `test@example.com`)
- `REMINDER_WEBHOOK_URL` — тестовый webhook URL (по умолчанию `https://example.invalid/webhook`)

### UI автотесты (Playwright, Python)
1) Установить зависимости:
```
pip install -r requirements.txt
```

2) Установить браузеры:
```
python -m playwright install
```

3) Запустить тесты:
```
pytest tests
```

